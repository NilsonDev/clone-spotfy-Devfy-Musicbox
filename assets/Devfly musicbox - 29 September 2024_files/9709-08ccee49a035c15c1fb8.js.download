(self.webpackChunk_loomhq_web_client=self.webpackChunk_loomhq_web_client||[]).push([[9709],{83034:function(e,t,n){"use strict";n.d(t,{Az:function(){return S},HM:function(){return y},Km:function(){return g},Q8:function(){return f},YJ:function(){return c},b:function(){return v},g_:function(){return k},hZ:function(){return _},oS:function(){return h},u9:function(){return m},zY:function(){return p}});var a,i,r,s,l,o,d,c=((a=c||{}).INVALID="INVALID",a.UNKNOWN="UNKNOWN",a.PENDING="PENDING",a.USER="USER",a.AUTO="AUTO",a),u=((i=u||{}).INVALID="INVALID",i.FINAL="FINAL",i.SPECULATIVE="SPECULATIVE",i),m=((r=m||{}).AUTO_GENERATED="AUTO_GENERATED",r.DEFAULT="DEFAULT",r.USER_EDITED_AUTO_GENERATED="USER_EDITED_AUTO_GENERATED",r.USER_EDITED_DEFAULT="USER_EDITED_DEFAULT",r.ATTEMPTED_AUTO_GENERATION="ATTEMPTED_AUTO_GENERATION",r);let p="variant-chatgpt",h="variant-chatgpt-excluded",v=["variant-openai","variant-openai-excluded"],f=[p,h,"variant-excluded"],g="auto_cta";var _=((s=_||{}).UNSUPPORTED="unsupported",s.IN_PROGRESS="in_progress",s.SUCCESS="success",s.FAILURE="failure",s.NOT_STARTED="not_started",s),k=((l=k||{}).AUTO_GENERATION="AUTO_GENERATION",l.USER_EDITED="USER_EDITED",l.AUTO_GENERATION_FAILED="AUTO_GENERATION_FAILED",l),E=((o=E||{}).SOP="SOP",o.CODE_DOCS="CODE_DOCS",o.PR_DESCRIPTION="PR_DESCRIPTION",o.QA_STEPS="QA_STEPS",o.STEP_BY_STEP="STEP_BY_STEP",o);let S=259200;var T=((d=T||{}).MISSING_VIDEO="missing_video",d.MISSING_USER="missing_user",d.NOT_IN_EXPERIMENT="not_in_experiment",d.EXCLUDE_ENTERPRISE="reason_exclude_enterprise",d.INVALID_DURATION="invalid_duration",d.USER_SETTING_DISABLED="user_setting_disabled",d.UPLOAD_OR_TRIM="upload_or_trim",d.USER_EDITED="user_edited",d.AUTO_EDITED="auto_edited",d.NO_COMPLETION_TIME="no_completion_time",d.TIMEOUT="timeout",d.EMPTY_TRANSCRIPT="empty_transcript",d.MINIMUM_TRANSCRIPT_LENGTH="minimum_transcript_length",d.FAILED_TO_PARSE_MESSAGE="failed_to_parse_message",d.FAILED_ERROR_CODE="failed_error_code",d.NO_RESPONSE_STREAM="no_response_stream",d.USAGE_LIMIT="usage_limit",d.ADD_ON_PLAN="add_on_plan",d.NO_TASKS_DETECTED="no_tasks_detected",d.EMPTY_CHAPTERS="empty chapters",d.FAILED_FORMAT_CHAPTERS="failed to format video chapters with auto chapters",d.FAILED_FORMAT_NUDGES="failed to format video nudges with auto nudges",d.PRE_CALL_PROCESS_FAILED="pre_call_process_failed",d.POST_CALL_PROCESS_FAILED="post_call_process_failed",d.ITX_UNHANDLED_ERROR="itx_unhandled_error",d.ITX_INVALID_LANGUAGE="itx_invalid_language",d.ITX_LARGE_FILE="itx_large_file",d.ITX_MANIFEST_MISMATCH="itx_manifest_mismatch",d.ITX_MANIFEST_NOT_RESOLVED="itx_manifest_not_resolved",d.ITX_SESSION_TERMINATED="itx_session_terminated",d);let y={add_on_plan:{description:"The user is not on the AI Add On plan. This is not an error, but rather the user is not in an eligible workspace."},auto_edited:{description:"The feature was already edited by the system automatically (not by the user). This is an error because the system should apply multiple edits to the feature."},empty_transcript:{description:"The video has an empty transcript. This is a catch all for many issues including: (1) no transcript was available yet by the time intelligence was processed, even after retries. (2) the video has no vocal audio (user does not talk, their microphone is on mute). (3) the video has no unintelligible audio, either quality or a non-supported language. (4) infrastructure failure in fetching the transcript from AWS S3, either from our end or AWS."},reason_exclude_enterprise:{description:"The video is in an enterprise account, and is excluded for this feature"},failed_error_code:{description:"The ChatGPT response has an error code. ChatGPT is likely down, or there is an invalid request being passed in (too many tokens, etc.)."},"failed to format video chapters with auto chapters":{description:"Video chapters were not parsable from the ChatGPT response, likely a malformed response."},"failed to format video nudges with auto nudges":{description:"Video nudges were not parsable from the ChatGPT response, likely a malformed response."},failed_to_parse_message:{description:"The ChatGPT response could not be parsed. This is most likely due to a malformed response from ChatGPT."},invalid_duration:{description:"The video is not long enough to be processed by this feature."},itx_invalid_language:{description:"The video is not in a supported language for this feature."},itx_large_file:{description:"The transcription process could not handle the recorded file size."},itx_manifest_mismatch:{description:"The transcription process found a problem in the recording manifest."},itx_manifest_not_resolved:{description:"The transcription process could not find the recording manifest."},itx_session_terminated:{description:"The transcription process waited too long for the recording completion."},itx_unhandled_error:{description:"Generic error during transcription."},minimum_transcript_length:{description:"The video has a transcript that is too short to be processed by this feature. Currently the limit is 150 characters, and this is enforced for all languages. This means denser languages by character length may require more more transcript to be available"},missing_user:{description:"The user could not be found, mostly likely something is down with the database preventing users from being fetched."},missing_video:{description:"The video could not be found, mostly likely it's been deleted or canceled before intelligence could be processed."},no_completion_time:{description:"The video has no known completion time, which means the timeout cannot be calculated."},no_response_stream:{description:"The ChatGPT response has no response stream. This is most due to an outage by ChatGPT preventing a streaming connection from being set up."},no_tasks_detected:{description:"ChatGPT did not detect any tasks in the video transcript. This is not necessarily a problem. Many, if not most recordings do not contain tasks."},not_in_experiment:{description:"The user is not in the experiment for this particular feature."},timeout:{description:"Intelligence took too long to process. Preventing any intelligence from overriding the results on the video."},upload_or_trim:{description:"The video is either an upload (v4) or a trim (v6), and is not eligible for this feature."},usage_limit:{description:"The user has used up their free AI Add On plan usage limit. This can be bumped in the admin console if needed"},user_edited:{description:"The feature was edited by the user before intelligence could be made available."},user_setting_disabled:{description:"The user has disabled this feature in their settings. This is not an error, but rather a user preference."}}},89168:function(e,t,n){"use strict";n.d(t,{v5:function(){return k},nx:function(){return _},Jh:function(){return f},Al:function(){return g}});var a=n(51110),i=n(33136),r=n(58216),s=n(20986),l=n(23117),o=n(95796),d=n(55040),c=n(62527),u=n(83445);let m=(0,u.Ps)`
    mutation ArchiveVideos($videoIds: [ID!]!, $isArchived: Boolean!) {
  result: archiveVideos(videoIds: $videoIds, isArchived: $isArchived) {
    ... on ArchiveVideosPayload {
      videos {
        id
      }
    }
  }
}
    `;var p=n(91146),h=n.n(p);let v=(0,u.Ps)`
    subscription WaveformGenerationStatus($id: ID!) {
  waveformGeneration(id: $id) {
    status
  }
}
    `;function f(e,t,n){return async()=>{let a=(0,i.J$)(),{data:r}=await a.query({query:h(),variables:{id:t,password:e},fetchPolicy:"no-cache"});if(r?.fetchVideoWaveform){let{fetchVideoWaveform:{status:e,source_url:t}}=r;n(e,t)}}}function g(e,t,n,a){return s=>{if([l.SB,l.EH].includes(n)){r.info(`Waveform generation status is ${n}. Not subscribing`);return}try{let n=(0,i.J$)(),o=n.subscribe({variables:{id:t},query:v}).subscribe(n=>{let{data:{waveformGeneration:{status:i}}}=n;r.info(`Waveform status updated: ${i}`),[l.SB,l.EH,l.$_].includes(i)&&a(i),[l.SB,l.EH].includes(i)&&(s(f(e,t,a)),o.unsubscribe())});return s(f(e,t,a)),o}catch(n){let e=`Error subscribing to waveform generation status for video ${t}: ${n}`;throw r.error(n,{message:e,videoId:t},{team:"create"}),Error(e)}}}function _({downloadEnabled:e,isVideoProtected:t,password:n,videoId:a}){return(i,l)=>{try{let{current_user_is_owner:r}=l().share_video;if(!(e||r)||!r&&t&&null==n)return;s.H(a,n,e=>{i((0,c.mV)(e))})}catch(e){r.warning(e,"error fetching share video download url")}}}function k(e){return t=>{(0,i.J$)().mutate({mutation:m,variables:{videoIds:[e],isArchived:!0}}).then(({data:e})=>{e?.result?.__typename==="ArchiveVideosPayload"?(t((0,o.Bh)("Video archived")),window.location.href=`${a.OA}${a.wE}`):t((0,d.o)("Error archiving video"))})}}},2500:function(e,t,n){"use strict";n.d(t,{N:function(){return d},j:function(){return o}});var a=n(33136),i=n(20409),r=n(62617),s=n.n(r),l=n(63598);let o=e=>{if(e.preventDefault(),e.stopPropagation(),e.target.className.indexOf("external-link")>-1)return(0,i.zv)(e.target.href);let t=e.target.getAttribute("data-seconds");if(!t)return;let n=Number(t);return window.top.postMessage({type:"embed-play-video-at-timestamp",numSeconds:n},"*"),!1},d=(e,t=!0)=>async(n,i=10)=>{let r=(0,a.J$)(),o=await r.query({query:s(),variables:{workspaceId:e,query:n,limit:3*i,includeContacts:t}}),d=(o.data.searchWorkspaceMembers?.users||[]).filter(e=>e).map(e=>({id:`user:${e.id}`,display:e.display_name,avatar:(0,l.kV)(e.avatars),email:e.email}));if(!t)return d.slice(0,i);let c=(o.data.searchWorkspaceContacts?.results||[]).filter(e=>e).map(e=>({id:`workspace_contacts:${e.id}`,display:e.displayName,source:e.source,email:e.value}));return(e=>{let t={};return e.reduce((e,n)=>t[n.email]?e:(t[n.email]=!0,[...e,n]),[])})([...d,...c]).slice(0,i)}},79944:function(e,t,n){"use strict";n.d(t,{K:function(){return I}});var a=n(20887),i=n(16032),r=n(71714),s=n(67053),l=n(29903),o=n(28537),d=n(45431),c=n(99474),u=n(58453),m=n(50679),p=n(58216),h=n(99219),v=n(76706),f=n(83034),g=n(95796),_=n(75382),k=n(60154),E=n(15582),S=n(36897),T=n(83445),y=n(55684);let N={},b=(0,T.Ps)`
    query GetIntelligenceStatus($videoId: ID!, $password: String) {
  getIntelligenceStatus(videoId: $videoId, password: $password) {
    ... on GetIntelligenceStatusPayload {
      autoTitleStatus
      autoDescriptionStatus
      autoChaptersStatus
      autoTasksStatus
      autoTasksCount
      hasTrimmedSilences
      hasTrimmedFillerWords
      secondsOfSilenceTrimmed
      numberOfFillerWordsTrimmed
      playableDuration
      processingInformation {
        trim_id
        trim_progress
        trim_ranges {
          from
          to
        }
        videoUploadValid
      }
    }
    ... on Error {
      message
    }
  }
}
    `,I=()=>{let{video:{id:e,createdAt:t}}=(0,o.dPl)(),{password:n}=(0,l.u)(),h=(0,i.useIsCurrentUserLoggedIn)(),{languageUnavailable:T,transcriptAvailable:I,transcriptEmpty:D,transcriptInProgress:w,transcriptRegenerating:x,transcriptUnavailable:P}=(0,r.h7)(),F=(0,s._)(),O=(0,m.I0)(),V=(0,m.v9)(k.Pw),{statusCacheExpired:U,setStatusCacheExpired:R,isLoading:$,setIsLoading:L,hasError:W,setHasError:G,chaptersFailed:M,setChaptersFailed:z,hasHandledAutoFillerWordAndSilenceRemovalWhenFromRecorder:q,setHasHandledAutoFillerWordAndSilenceRemovalWhenFromRecorder:B}=C(),{data:H,stopPolling:j,refetch:K}=function(e){let t={...N,...e};return y.a(b,t)}({variables:{videoId:e,password:n},pollInterval:1e3,skip:!h,onCompleted:e=>{e&&e?.getIntelligenceStatus?.__typename!=="GetIntelligenceStatusPayload"&&(L(!1),G(!0),j())},onError:()=>{L(!1),G(!0),j()}});(0,u.useEffect)(()=>{let e=(Date.now()-new Date(t).getTime())/1e3,n=e>=f.Az;n&&(R(!0),L(!1),j())},[t,L,j,R]);let X=(0,i.useCurrentUserSelector)(e=>!!e.videoSettings?.auto_filler_word_removal,!1),Q=(0,i.useCurrentUserSelector)(e=>!!e.videoSettings?.auto_silence_removal,!1),Y=(0,d.Mr)({flag:v.EE7,activationValues:["filler_words","filler_words_and_silences"]});(0,u.useEffect)(()=>{if(H?.getIntelligenceStatus?.__typename!=="GetIntelligenceStatusPayload")return;let e=H.getIntelligenceStatus.autoTitleStatus,t=H.getIntelligenceStatus.autoDescriptionStatus,n=H.getIntelligenceStatus.autoChaptersStatus,a=H.getIntelligenceStatus.autoTasksStatus,i=U||null!==e&&e!==_.jC.Pending,r=U||null!==t&&t!==_.jC.Pending,s=null!==n&&[_.CK.Success,_.CK.Failure,_.CK.Unsupported].includes(n),l=n===_.CK.NotStarted&&!V;l&&z(!0);let o=U||null!==a&&a!==_.jC.Pending;if(i&&r&&o){let e=Y&&(X||Q),t=e&&!(H.getIntelligenceStatus.hasTrimmedSilences||H.getIntelligenceStatus.hasTrimmedFillerWords);L(!1),!t&&(s||l)&&j()}},[H,j,z,V,U,L,Y,X,Q]);let Z=null,J=null,ee=null,et=!1,en=!1,ea=0,ei=0,er=0,es=null,el=null;H?.getIntelligenceStatus?.__typename==="GetIntelligenceStatusPayload"&&(Z=H?.getIntelligenceStatus?.autoTitleStatus,J=H?.getIntelligenceStatus?.autoDescriptionStatus,ee=H?.getIntelligenceStatus?.autoChaptersStatus,et=H?.getIntelligenceStatus?.hasTrimmedSilences,en=H?.getIntelligenceStatus?.hasTrimmedFillerWords,ea=H?.getIntelligenceStatus?.secondsOfSilenceTrimmed,ei=H?.getIntelligenceStatus?.numberOfFillerWordsTrimmed,er=H?.getIntelligenceStatus.autoTasksCount??0,es=H?.getIntelligenceStatus?.playableDuration,el=H?.getIntelligenceStatus?.processingInformation);let eo=(0,m.v9)(k.nN)===_.jC.User,ed=eo||Z===_.jC.User,ec=(0,m.v9)(k.yo)===_.jC.User,eu=ec||J===_.jC.User,{userEdited:em}=(0,c.Jp)(),ep=J===_.jC.Auto,eh=Z===_.jC.Auto,ev=ee===_.CK.Success,ef=[eh,ep,ev,er>0].filter(Boolean).length>0,eg=!M&&(null===ee||[_.CK.InProgress,_.CK.NotStarted].includes(ee));(0,u.useEffect)(()=>{let e=setTimeout(()=>{L(!1),j();let e=null!==ee&&[_.CK.Success,_.CK.Failure,_.CK.Unsupported].includes(ee);e||z(!0)},A);return()=>clearTimeout(e)},[ee,z,L,j]);let e_=(0,m.v9)(E.Vz);return(0,u.useEffect)(()=>{if(V&&!q&&(ea>0||ei>0)){ea>0&&S.track(a.sD5,{videoId:e,secondsOfSilenceTrimmed:ea}),ei>0&&S.track(a.tXZ,{videoId:e,numberOfFillerWordsTrimmed:ei}),B(!0);let t="auto-fws-removal:",n={videoId:e,secondsOfSilenceTrimmed:ea,numberOfFillerWordsTrimmed:ei};e_?(p.info(`${t} completed after video played`,n),O((0,g.Bh)("We've automatically trimmed filler words and silences from your video! Please reload to see the changes."))):(p.info(`${t} completed before video played`,n),el&&F({playable_duration:es,processing_information:el}))}},[V,ei,ea,q,B,e_,es,el,O,F,e]),{autoChaptersGenerated:ev,autoSummaryGenerated:ep,autoTasksCount:er,autoTitleGenerated:eh,hasAnyIntelligenceFeatures:ef,hasError:W,hasTrimmedFillerWords:en,hasTrimmedSilences:et,hasUserEditedChapters:em,hasUserEditedSummary:eu,hasUserEditedTitle:ed,isAutoChaptersLoading:eg,isLoading:$,languageUnavailable:T,numberOfFillerWordsTrimmed:ei,refreshStatus:K,secondsOfSilenceTrimmed:ea,transcriptAvailable:I,transcriptEmpty:D,transcriptInProgress:w,transcriptRegenerating:x,transcriptUnavailable:P}},C=(0,h.Z)(e=>({isLoading:!0,setIsLoading:t=>e({isLoading:t}),hasError:!1,setHasError:t=>e({hasError:t}),statusCacheExpired:!1,setStatusCacheExpired:t=>e({statusCacheExpired:t}),chaptersFailed:!1,setChaptersFailed:t=>e({chaptersFailed:t}),hasHandledAutoFillerWordAndSilenceRemovalWhenFromRecorder:!1,setHasHandledAutoFillerWordAndSilenceRemovalWhenFromRecorder:t=>e({hasHandledAutoFillerWordAndSilenceRemovalWhenFromRecorder:t})})),A=1e4},67053:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var a=n(50679),i=n(62527),r=n(14866),s=n(28537),l=n(89168),o=n(91989),d=n(29903);let c=()=>{let e=(0,a.I0)(),{setVideo:t,setVideoProperties:n,video:{id:c,downloadEnabled:u}}=(0,s.dPl)(),{isProtected:m,password:p}=(0,d.u)();return a=>{e((0,i.qh)(!0)),t({processingInformation:{trimId:a.processing_information.trim_id,trimProgress:a.processing_information.trim_progress,trimRanges:a.processing_information.trim_ranges,videoUploadValid:!!a.processing_information.videoUploadValid}}),n({playableDuration:a.playable_duration}),e((0,i.mV)(null)),e((0,l.nx)({downloadEnabled:u,isVideoProtected:m,password:p,videoId:c})),e((0,r.Mb)(null)),e((0,o.HQ)())}}},55238:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var a,i=((a=i||{}).TrimWeave="trim-no-subpage",a.Stitch="stitch-no-subpage",a.Link="Add a link",a.Thumbnail="Change thumbnail",a.Settings="Video settings",a.Default="Set default link",a)},42722:function(e,t,n){"use strict";n.d(t,{E:function(){return a},L:function(){return i}});let a="Summary",i="Chapters"},44e3:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var a=n(50679),i=n(76706),r=n(83034);let s=()=>{let e=(0,a.v9)(e=>{let t=e?.feature_flags[i.YU];return t?.value}),t=r.Q8.includes(e);return!!t}},14052:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var a=n(32910),i=n.n(a),r=n(58453),s=n(9274);let l=e=>{let t={...e},n="small"===e.size,{shouldHighlight:a=!1,hasError:l=!1}=e,o=e.spacing||"none";return t.className=i()("autoresize-textarea_textArea_Rwt",e.className,{"autoresize-textarea_sizeSmall_3e5":n,"autoresize-textarea_sizeMedium_14j":!n,"autoresize-textarea_paddingSmall_kjc":"small"===o,"autoresize-textarea_paddingMedium_2tA":"medium"===o,"autoresize-textarea_empty_1oT":!a,"autoresize-textarea_error_1iG":l}),t.ref=e.textRef,delete t.textRef,delete t.shouldHighlight,delete t.hasError,delete t.spacing,r.createElement(s.Z,{...t})}},99474:function(e,t,n){"use strict";n.d(t,{Wp:function(){return a},ZF:function(){return D},S1:function(){return ec},YD:function(){return i},Jp:function(){return w}});let a="chaptersTextArea",i=e=>null==e||0===e.trim().length;var r=n(20887),s=n(55684),l=n(16032),o=n(29903),d=n(28537),c=n(24105),u=n(44e3),m=n(92094),p=n.n(m),h=n(58453),v=n(50679),f=n(83034),g=n(15358),_=n(62527),k=n(84270),E=n(60154),S=n(36897),T=n(88418),y=n.n(T),N=n(83445),b=n(81504);let I={},C=(0,N.Ps)`
    mutation UpdateChapters($videoId: ID!, $content: String!, $password: String) {
  updateChapters(videoId: $videoId, content: $content, password: $password) {
    ... on VideoChapters {
      id
      video_id
      content
      schema_version
      updatedAt
      edited_at
      auto_chapter_status
    }
    ... on InvalidRequestWarning {
      message
    }
    ... on UserNotAuthorizedError {
      message
    }
    ... on GenericError {
      message
    }
  }
}
    `,A=(0,h.createContext)(null),D=({children:e})=>{let t=(0,h.useRef)(null),{video:{currentUserCanEdit:n=!1,id:m,videoProperties:{playableDuration:T}}}=(0,d.dPl)(),{password:N}=(0,o.u)(),D=(0,v.I0)(),[w,x]=(0,h.useState)(null),P=(0,u.I)(),F=(0,l.useCurrentUserSelector)(e=>e.videoSettings?.auto_chapters!==!1,!1),O=(0,v.v9)(E.e6),V=(0,l.useCurrentUserSelector)(e=>e.aiAccess,null),U=!!V?.autoChapters,[R,$]=(0,h.useState)(!1),[L,W]=(0,h.useState)(!1),[G,M]=(0,h.useState)(""),[z,q]=(0,h.useState)(""),[B,H]=(0,h.useState)(!1),[j,K]=(0,h.useState)(!1),[X,Q]=(0,h.useState)(!1),Y=(0,k.c)(g.BR.AUTO_CHAPTERS_FTUX),Z=(0,k.l)(g.BR.AUTO_CHAPTERS_FTUX),J=!!(P&&F&&U),{data:ee,loading:et,startPolling:en,stopPolling:ea}=(0,s.a)(y(),{variables:{videoId:m,password:N}}),ei=et?null:ee?.fetchVideoChapters?.content??"",er=et?null:ee?.fetchVideoChapters?.auto_chapter_status??"",[es]=function(e){let t={...I,...e};return b.D(C,t)}({variables:{videoId:m,content:G,password:N}}),el=(0,h.useCallback)(e=>{M(e),D((0,_.Bg)(e))},[D]);(0,h.useEffect)(()=>{if(!et&&null!==ei){el(ei);let e=ee?.fetchVideoChapters;e&&H(!!e.edited_at),K(!1),er===f.hZ.SUCCESS&&!Y&&Z&&K(!0),!ei&&n&&O&&J&&Q(!0)}},[ei,et,n,Q,ee,er,J]),(0,h.useEffect)(()=>{if(!J)return;let e=ee?.fetchVideoChapters?.edited_at,t=ee?.fetchVideoChapters?.auto_chapter_status,n=O&&(t===f.hZ.NOT_STARTED||t===f.hZ.IN_PROGRESS),a=ee?.fetchVideoChapters?.content,i=!O&&(e||a);if(i){Q(!1),el(a),ea();return}et||n?en(1e3):(Q(!1),el(a),ea());let r=setTimeout(()=>{Q(!1),ea()},35e3);return()=>{clearTimeout(r)}},[ee?.fetchVideoChapters?.auto_chapter_status,et,en,ea,J,O]),(0,h.useEffect)(()=>{if(R){let e=document.getElementById(a);e?.focus();let t=e?.value?.length;e?.setSelectionRange(t,t)}},[R]),(0,h.useEffect)(()=>{L&&R&&(t?.current?.scrollIntoView({behavior:"smooth",block:"center"}),W(!1))},[R,L]);let eo=(0,h.useCallback)(e=>{let t=(0,c.uV)(z,T).chapters,n=(0,c.uV)(e,T).chapters,a=!p()(t,n);a&&S.track(r.FO8,{video_id:m,old_chapters_string:z,new_chapters_string:e,old_validated_chapters:t,new_validated_chapters:n,old_validated_chapters_count:t?.length||0,new_validated_chapters_count:n?.length||0,chapter_generation_method:f.g_.USER_EDITED,chapter_generation_failure_reason:null})},[z,m,T]),ed=(0,h.useCallback)(e=>{el(e),eo(e)},[eo,el]),ec=(0,h.useCallback)(()=>{ed(""),$(!1),es({variables:{content:"",videoId:m,password:N}}),S.track(r.uKB,{video_id:m})},[ed,es,m,N]);(0,h.useEffect)(()=>{if(!G||0===G.length){x(null);return}let e=(0,c.uV)(G,T);x(e.error?`${e.error} Chapters will not display on the video timeline.`:null)},[G,T]);let eu=(0,h.useCallback)(()=>{ed(G),es(),$(!1),H(!0),K(!1)},[G,ed,es]),em=(0,h.useCallback)(()=>{M(z),$(!1)},[z]),ep=(0,h.useCallback)(({analyticsEventName:e,scrollIntoView:t})=>{q(G),$(!0),K(!1),W(!!t),S.track(e,{video_id:m})},[G,m]),eh=!i(G),ev=(0,h.useMemo)(()=>({autoChapterStatus:er,canEditChapters:n,cancelEditChapters:em,chapters:G,chaptersAvailable:eh,chaptersInputWrapperRef:t,clearChapters:ec,editChapters:ep,errorMsg:w,fetchingChapters:et,isAutoChaptersExpected:J,saveChapters:eu,setChapters:M,setShowAutoChaptersFTUXPopover:K,showAutoChaptersFTUXPopover:j,showInput:R,userEdited:B,waitingForAI:X}),[er,n,G,et,eh,w,ec,em,ep,J,eu,j,R,B,X]);return h.createElement(A.Provider,{value:ev},e)},w=()=>{let e=(0,h.useContext)(A);if(!e)throw Error("useChaptersContext must be used within a ChaptersContextProvider");return e};var x=n(42722),P=n(92714),F=n(32910),O=n.n(F),V=n(50077),U=n(18343),R=n(49079),$=n(23904),L=n(59279),W=n(58789),G=n(61966),M=n(24790),z=n(92431),q=n(25051),B=n(14052),H=n(42445);let j="Remove chapters",K=e=>{let{id:t,shouldHighlight:n,textRef:a,onCancel:i,onSave:r,onClear:s,hasError:l,...o}=e,d={...o},c={...o},u="small"===o.size,m=O()(o.className,{"autoresize-chapter-textarea_sizeSmall_2lX":u,"autoresize-chapter-textarea_sizeMedium_eNc":!u,"autoresize-chapter-textarea_empty_2_H":!n,"autoresize-chapter-textarea_hasError_3gy":l});return d.className=O()("autoresize-chapter-textarea_textArea_2jE",m),c.className=O()("autoresize-chapter-textarea_textAreaAutoChapters_duK",m),h.createElement("div",{className:d.className},h.createElement(M.ggW,{alignItems:"start",gap:"xsmall",columns:["11fr","1fr"]},h.createElement(B.a,{id:t,textRef:a,...c}),h.createElement("div",{className:"autoresize-chapter-textarea_showDeleteChapters_2UP"},h.createElement(M.ua7,{tabIndex:-1,content:j},h.createElement(M.hU,{"data-testid":"remove-chapters",altText:j,icon:h.createElement(H.z,null),isDisabled:0===e.value.length,onClick:s})))),h.createElement(M.ggW,{gap:"small",justifyContent:"end"},h.createElement(M.Avr,{onClick:i,"data-testid":"cancel-chapters"},"Cancel"),h.createElement(M.zxk,{onClick:r,variant:"primary","data-testid":"save-chapters"},"Save")))};var X=n(18021),Q=n(51155),Y=n(58216),Z=n(37658),J=n(32847),ee=n(14866),et=n(86029),en=n(10523);let ea=(e,t,n,a)=>{if(0===e.length)return null;let i=e.split("\n"),s=[];for(let[e,l]of i.entries()){let i=(0,c.GV)(l,t);if(!i||"number"!=typeof t){let t=(0,en.H3)(l,e,"pre",!0);s.push(t);continue}let o=()=>{S.track(r.p8K,{video_id:a,chapter_timestamp:i.timestamp,chapter_title:i.chapter})},d=(0,en.Ld)(i.timestamp,i.chapter,n,t,o);s.push(d)}return s};var ei={whiteSpaceBreak:"linked-chapters_whiteSpaceBreak_bUT",show:"linked-chapters_show_1K7",chaptersHover:"linked-chapters_chaptersHover_M6d",textCursor:"linked-chapters_textCursor_1MM",matchPlaceholderColor:"linked-chapters_matchPlaceholderColor_YJL",showErrorOutline:"linked-chapters_showErrorOutline_YTO",showEditChapters:"linked-chapters_showEditChapters_14t"};let er="Edit chapters",es=({chapters:e,onClick:t,canEdit:n,hasError:a=!1})=>{let r=(0,v.I0)(),s=i(e),[l,o]=(0,Q.XI)(),{setVideo:u,video:{complete:m=!1,currentUserCanEdit:p,id:f,videoProperties:{playableDuration:g}}}=(0,d.dPl)(),[k,E]=(0,h.useState)(e),[S,{data:T}]=(0,Z.y0)({onError:e=>{e&&Y.error(e,{message:"Error fetching video"},{feature:q.L0.VideoPreload})},onCompleted:()=>{let e=T?.getVideo,t=(0,X.TW)(e);u(t),r((0,_.jE)(e)),r((0,ee.OK)())}}),{data:y,error:N}=(0,et.G)({variables:{videoId:f},skip:m||!f,onData:()=>{b&&S()}}),b=y?.recordingCompleted||N?.message==="Video already completed";if((0,h.useEffect)(()=>{let t=e;!p&&t.split(" ").length>100&&(t=function(e){let t=e.split("\n"),n="",a=0;for(let[e,i]of t.entries()){e>0&&(n+="\n");let t=(0,c.GV)(i),r=(t?.chapter??i).split(" ");if((a+=r.length)>=100){let e=a-100;r.splice(r.length-e,e);let i=t?t.timestamp+" ":"";n+=`${i}${r.join(" ").trim()}\u2026`;break}n+=i}return n}(t)),E(t)},[E,e,p]),s)return h.createElement(h.Fragment,null);let I=O()(ei.whiteSpaceBreak,ei.show,{[ei.chaptersHover]:n,[ei.textCursor]:n,[ei.hintPadding]:n,[ei.matchPlaceholderColor]:s&&n,[ei.showErrorOutline]:a}),C=ea(k,g,r,f);if(!C)return h.createElement(h.Fragment,null);let A=k!==e;return A&&function(e,t){let n=e.pop(),a=h.createElement(M.Avr,{onClick:t,size:"small"},"See more");Array.isArray(n)?e.push([n[0],h.createElement(h.Fragment,null,n[1],a)]):e.push(h.createElement(h.Fragment,null,n,a))}(C,t=>{t.stopPropagation(),E(e)}),h.createElement("div",{className:O()(I),...o},h.createElement(M.ggW,{alignItems:"start",gap:"xsmall",columns:["11fr","1fr"]},h.createElement(M.ggW,{alignItems:"start",gap:"xsmall",columns:["max-content","1fr"]},C.map((e,t)=>{let n=Array.isArray(e)?e:["",e];return[h.createElement(M.xvT,{"data-testid":`chapter-timestamp-${t}`,key:`time_${t}`,size:"medium",style:{textAlign:"right"}},n[0]),h.createElement(M.xvT,{"data-testid":`chapter-title-${t}`,key:`title_${t}`,size:"medium"},n[1])]})),n&&l?h.createElement("div",{className:ei.showEditChapters},h.createElement(M.ua7,{tabIndex:-1,content:er},h.createElement(M.hU,{"data-testid":"edit-chapters",altText:er,icon:h.createElement(J.b,null),onClick:t}))):null))},el=P.Z.div`
  padding: var(--lns-space-medium);
  background: var(--lns-color-background);
  border-radius: var(--lns-radius-large);
  border: 1px solid var(--lns-color-border);
  box-shadow: var(--lns-shadow-small);
  width: 360px;
`,eo=()=>h.createElement(el,null,h.createElement(M.ggW,{gap:"xsmall",autoFlow:"row"},h.createElement(M.xvT,{color:"bodyDimmed"},"You can add chapters to any Loom by adding a list of ascending timestamps and chapter titles."),h.createElement(M.xvT,{color:"bodyDimmed"},"Chapters must start at 00:00 and be at least 5 seconds long."),h.createElement(M.rUS,{href:"https://support.loom.com/hc/en-us/articles/360018208478-How-to-add-a-summary-and-chapters-to-your-video"},"\uD83D\uDD17 More on creating chapters for your Loom"))),ed=()=>{let[e,t]=(0,h.useState)(!1),{featureLoadedRef:n}=(0,W.kX)(),{video:i}=(0,d.dPl)(),s=i.currentUserCanEdit??!1,l=(0,V.K)(),o=(0,v.v9)(E.e6),{canEditChapters:c,userEdited:u,errorMsg:m,chapters:p,fetchingChapters:f,setChapters:g,editChapters:_,saveChapters:k,cancelEditChapters:S,clearChapters:T,chaptersAvailable:y,waitingForAI:N,showInput:b,chaptersInputWrapperRef:I,isAutoChaptersExpected:C}=w();if(!s&&!p||l)return null;let A=null!==m&&s,D=null;c&&N?D=function(){return h.createElement(h.Fragment,null,h.createElement(M.ggW,{alignItems:"start",gap:"xsmall",columns:["80px","11fr"]},h.createElement("div",null,h.createElement(M.N2B,{lines:1}),h.createElement(M.N2B,{lines:1}),h.createElement(M.N2B,{lines:1})),h.createElement("div",null,h.createElement(M.N2B,{lines:3}))),h.createElement(G.BO,{name:R.Mi.AutoChaptersLoading}))}:b&&c?D=function(){return h.createElement("div",{className:"chapters_inputContainer_2E5"},h.createElement(K,{id:a,textRef:I,placeholder:"0:00 Chapter 1\n0:20 Chapter 2\n0:30 Chapter 3",className:O()("chapters_autoHeight_2qq","chapters_chaptersInput_19Y",{chapters_hasError_2bz:A}),value:p||"",onChange:e=>g(e.target.value),shouldHighlight:!0,onSave:k,onCancel:S,onClear:T,hasError:A}),A?h.createElement(M.W20,null,h.createElement(M.xvT,{color:"danger"},m),h.createElement(M.LZC,{size:"small"}),h.createElement(M.xvT,{color:"danger",fontWeight:"bold"},"Example:"),h.createElement(M.LZC,{size:"small"}),h.createElement(M.xvT,{size:"small",color:"danger",fontSize:!0},"0:00 Introduction",h.createElement("br",null),"0:45 Proposed solution",h.createElement("br",null),"2:17 Action items")):null)}:y?D=function(){return h.createElement(h.Fragment,null,!u&&h.createElement(U.O,null),h.createElement("div",{"data-testid":"formatted-chapters"},h.createElement("div",{onClick:()=>_({analyticsEventName:r.wg8})},h.createElement(es,{canEdit:c,onClick:()=>_({analyticsEventName:r.wg8}),chapters:p,hasError:A}),A?h.createElement(M.xvT,{color:"danger"},m):null)),o&&C&&h.createElement(G.BO,{name:R.Mi.AutoChapters}))}:c&&!f&&(D=function(){return h.createElement(M.W20,{paddingY:"small"},h.createElement(M.ggW,{gap:"xsmall"},h.createElement(M.xvT,{"data-testid":"add-chapters-text",size:"body-md",color:"bodyDimmed",onClick:()=>_({analyticsEventName:r.afv}),className:"chapters_addChaptersText_BtO"},"+ Add chapters")))});let P=null!==D;return h.createElement("div",{ref:n},P&&h.createElement(M.ggW,{gap:"small"},h.createElement(M.xvT,{fontWeight:"bold",size:"large"},x.L),c?h.createElement("div",{onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),style:{zIndex:e?3:0}},h.createElement(M.J2e,{isOpen:e,placement:"rightCenter",content:h.createElement(eo,null)},h.createElement(M.JO$,{icon:h.createElement(z.M,null),altText:"Info",size:2,color:"bodyDimmed"}))):null),D?.())},ec=()=>h.createElement($.$,{feature:q.L0.VideoPackaging,errorType:L.s.DEFAULT,additionalLoggingValues:{version:"chapters"}},h.createElement(ed,null))},86029:function(e,t,n){"use strict";n.d(t,{G:function(){return l}});var a=n(83445),i=n(134);let r={},s=(0,a.Ps)`
    subscription OnRecordingCompleted($videoId: ID!) {
  recordingCompleted(id: $videoId)
}
    `;function l(e){let t={...r,...e};return i.m(s,t)}},48612:function(e,t,n){"use strict";n.d(t,{x7:function(){return s},m$:function(){return i},Gq:function(){return l}});var a=n(58453);let i=a.createContext(null);i.displayName="HighlightReplyContext";let r=(0,a.createContext)(null),s=({children:e})=>{let[t,n]=(0,a.useState)(!1),i=(0,a.useCallback)(()=>{n(!0)},[]),s=(0,a.useMemo)(()=>({isDescriptionInputVisible:t,setIsDescriptionInputVisible:n,focusDescriptionInput:i}),[i,t]);return a.createElement(r.Provider,{value:s},e)},l=function(){let e=(0,a.useContext)(r);if(!e)throw Error("useDescriptionContext must be used within a DescriptionContextProvider");return e}},18343:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var a=n(58453),i=n(24790);let r=()=>a.createElement(i.xvT,{size:"small",color:"bodyDimmed"},"Generated by Loom AI")},33122:function(e,t,n){"use strict";n.d(t,{V:function(){return d},Q:function(){return o}});var a=n(62439),i=n(58216);n(3918);let r=["about:","blob:","data:","javascript:","file:","chrome:","chrome-extension:"],s=e=>{for(let t of r)if(e.startsWith(t))return!1;return!0};var l=n(53120);let o=e=>{try{let t=(0,a.Z)(e,{stripWWW:!0}),n=new URL(t),i=n.hostname,r=i.split("."),s=r.length>1?r.slice(-2)[0]:r[0];return s}catch(e){return}},d=e=>{if(e){if(!s(e)){i.warning("Error getting CTA text",{err:"Url contains undesired scheme"});return}try{let t=(0,a.Z)(e,{stripWWW:!0});if(l.wG.test(t))return"Book a meeting!";let n=o(e);if(!n)return;let i=n.charAt(0).toUpperCase()+n.slice(1);return i}catch(e){i.warning("Error getting CTA text",{err:e});return}}}},10523:function(e,t,n){"use strict";n.d(t,{TT:function(){return g},Ld:function(){return S},Xu:function(){return E},H3:function(){return _}});var a=n(8534),i=n(20887),r=n(32910),s=n.n(r),l=n(58453),o=n(3918),d=n.n(o),c=n(20409),u=n(24790),m=n(12744),p=n(14866),h=n(36897),v=n(2500),f={contents:"timestamps_contents_2xW",tabular:"timestamps_tabular_kaX"};let g=(e,t)=>{let n;let a=/\d{0,2}:\d{1,2}:\d{2}|\d{1,2}:\d{2}/g,i=[];for(;null!==(n=a.exec(e));){let e=(0,m.Vy)(n[0]);if(null==e)continue;let r=e<=t;r&&i.push({time:e,endIndex:a.lastIndex,literal:n[0]})}return i},_=(e,t,n,a=!1)=>{let i=d()({apostrophes:!0,strict:!0,re2:!1}).exec(e);if(null==i)return l.createElement("span",{key:`${t}-${n}`},a?e.trimStart():e);let r=i[0];return l.createElement("div",{"data-testid":"replace-url-wrapper",className:f.contents,key:`link-${t}`},l.createElement("span",null,e.substring(0,i.index)),k(r),_(e.substring(i.index+r.length),t+i.index,n))},k=e=>{let[t,n]=(0,c.QQ)(e),a=/^www/.test(t)?`//${t}`:t;return l.createElement(l.Fragment,null,l.createElement(u.rUS,{target:"_blank",onClick:e=>e.stopPropagation(),variant:"neutral",href:a},t),n)},E=(e,t,n)=>{let r=[],o=0;e.forEach(e=>{let d=_(t.substring(o,e.endIndex-e.literal.length),o,"pre"),c=l.createElement(u.rUS,{key:o,variant:"neutral",className:s()(a.j4,f.tabular),onClick:t=>{h.track(i.nmk),v.j.call(t.target,t),n((0,p.Aq)(e.time)),window.scroll(0,0)},"data-seconds":e.time},e.literal);r.push(d),r.push(c),o=e.endIndex});let d=_(t.substring(o),o,"post");return r.push(d),r},S=(e,t,n,i,r)=>{let o=(0,m.Vy)(e);if(null===o)return[l.createElement(l.Fragment,null),l.createElement(l.Fragment,null)];let d=e=>{v.j.call(e.target,e),n((0,p.Aq)(o)),n((0,p.Mp)()),window.scroll(0,0),r&&r()},c=o<=i,h=l.createElement(u.rUS,{style:{textDecoration:"none"},key:e,variant:c?"primary":"neutral",className:s()(a.j4,f.tabular),onClick:e=>{c&&d(e)},"data-seconds":o,href:`?t=${o}`},e),g=_(t,0,"pre",!0);return[h,g]}},91146:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FetchVideoWaveform"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"password"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fetchVideoWaveform"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"password"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoWaveformDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"source_url"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:231}};t.loc.source={body:"query FetchVideoWaveform($id: ID!, $password: String) {\n  fetchVideoWaveform(id: $id, password: $password) {\n    ... on VideoWaveformDetails {\n      status\n      source_url\n    }\n    ... on GenericError {\n      message\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}t.definitions.forEach(function(e){if(e.name){var t=new Set;(function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,n)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,n)}),t.definitions&&t.definitions.forEach(function(t){e(t,n)})})(e,t),n[e.name.value]=t}}),e.exports=t,e.exports.FetchVideoWaveform=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,s=new Set,l=new Set;for(r.forEach(function(e){l.add(e)});l.size>0;){var o=l;l=new Set,o.forEach(function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach(function(e){l.add(e)}))})}return s.forEach(function(t){var n=a(e,t);n&&i.definitions.push(n)}),i}(t,"FetchVideoWaveform")},88418:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FetchChapters"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"password"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fetchVideoChapters"},arguments:[{kind:"Argument",name:{kind:"Name",value:"videoId"},value:{kind:"Variable",name:{kind:"Name",value:"videoId"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"password"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoChapters"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"video_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schema_version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"auto_chapter_status"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EmptyChaptersPayload"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"InvalidRequestWarning"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:423}};t.loc.source={body:"query FetchChapters($videoId: ID!, $password: String) {\n  fetchVideoChapters(videoId: $videoId, password: $password) {\n    ... on VideoChapters {\n      id\n      video_id\n      content\n      schema_version\n      updatedAt\n      edited_at\n      auto_chapter_status\n    }\n    ... on EmptyChaptersPayload {\n      content\n    }\n    ... on InvalidRequestWarning {\n      message\n    }\n    ... on Error {\n      message\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}t.definitions.forEach(function(e){if(e.name){var t=new Set;(function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,n)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,n)}),t.definitions&&t.definitions.forEach(function(t){e(t,n)})})(e,t),n[e.name.value]=t}}),e.exports=t,e.exports.FetchChapters=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,s=new Set,l=new Set;for(r.forEach(function(e){l.add(e)});l.size>0;){var o=l;l=new Set,o.forEach(function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach(function(e){l.add(e)}))})}return s.forEach(function(t){var n=a(e,t);n&&i.definitions.push(n)}),i}(t,"FetchChapters")},62617:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UtilityMemberTypeaheadQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspaceId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeContacts"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchWorkspaceMembers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspaceId"},value:{kind:"Variable",name:{kind:"Name",value:"workspaceId"}}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SearchWorkspaceMembersResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatars"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thumb"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isAtlassianMastered"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"searchWorkspaceContacts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeContacts"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SearchWorkspaceContactsPayload"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"results"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"source"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:677}};t.loc.source={body:"query UtilityMemberTypeaheadQuery(\n  $workspaceId: ID!\n  $query: String!\n  $limit: Int\n  $includeContacts: Boolean!\n) {\n  searchWorkspaceMembers(\n    workspaceId: $workspaceId\n    query: $query\n    limit: $limit\n  ) {\n    ... on SearchWorkspaceMembersResult {\n      users {\n        id\n        display_name\n        email\n        avatars {\n          thumb\n          isAtlassianMastered\n        }\n      }\n    }\n  }\n\n  searchWorkspaceContacts(query: $query, limit: $limit)\n    @include(if: $includeContacts) {\n    ... on SearchWorkspaceContactsPayload {\n      results {\n        id\n        avatarUrl\n        displayName\n        value\n        source\n        type\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}t.definitions.forEach(function(e){if(e.name){var t=new Set;(function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,n)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,n)}),t.definitions&&t.definitions.forEach(function(t){e(t,n)})})(e,t),n[e.name.value]=t}}),e.exports=t,e.exports.UtilityMemberTypeaheadQuery=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,s=new Set,l=new Set;for(r.forEach(function(e){l.add(e)});l.size>0;){var o=l;l=new Set,o.forEach(function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach(function(e){l.add(e)}))})}return s.forEach(function(t){var n=a(e,t);n&&i.definitions.push(n)}),i}(t,"UtilityMemberTypeaheadQuery")}}]);
//# sourceMappingURL=https://www.loom.com/admin/sourcemaps/js/9709-08ccee49a035c15c1fb8.js.map